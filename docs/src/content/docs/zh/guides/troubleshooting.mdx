---
title: 故障排除
description: Learn how to troubleshoot issues with the OpenAI Agents SDK.
---

## 支持的环境

OpenAI Agents SDK 支持以下服务器环境：

- Node.js 22+
- Deno 2.35+
- Bun 1.2.5+

### 有限支持

- **Cloudflare Workers**：Agents SDK 可在 Cloudflare Workers 中使用，但目前存在一些限制：
  - SDK 目前需要启用 `nodejs_compat`
  - 需要在请求结束时手动刷新追踪数据。[参见追踪指南](/openai-agents-js/zh/guides/tracing#export-loop-lifecycle)了解更多细节。
  - 由于 Cloudflare Workers 对 `AsyncLocalStorage` 的支持有限，部分追踪可能不准确
  - 出站 WebSocket 连接必须使用基于 fetch 的升级（而不是全局的 `WebSocket` 构造函数）。对于 Realtime，请在 `@openai/agents-extensions` 中使用 Cloudflare 传输（`CloudflareRealtimeTransportLayer`）。
- **Responses API WebSocket 传输**：
  - 需要全局的 `WebSocket` 实现。
  - `WebSocket` 实现必须支持握手时的自定义请求头。
  - 许多类浏览器的 WebSocket API（以及某些 edge 运行时）不支持自定义出站请求头。在这些环境中，请改用默认的 HTTP Responses 传输。
  - 如果你看到报错提示缺少全局 `WebSocket` 实现或不支持自定义请求头，说明该运行时的 websocket 实现与 Responses 的 WebSocket 传输不兼容。
- **浏览器**：
  - 浏览器中目前不支持追踪
- **v8 isolates**：
  - 如果使用带有合适浏览器 polyfill 的打包器，你应该可以为 v8 isolates 打包该 SDK，但追踪将无法工作
  - v8 isolates 尚未经过广泛测试

## 调试日志

如果你在使用 SDK 时遇到问题，可以启用调试日志以获取更多信息。

通过将环境变量 `DEBUG` 设置为 `openai-agents:*` 来启用调试日志。

```bash
DEBUG=openai-agents:*
```

或者，你也可以只为 SDK 的特定部分开启调试：

- `openai-agents:core` — SDK 的主要执行逻辑
- `openai-agents:openai` — OpenAI API 调用
- `openai-agents:realtime` — Realtime Agents 组件
