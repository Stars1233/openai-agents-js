---
title: 실행 결과
description: Learn how to access the results and output from your agent run
---

import { Code } from '@astrojs/starlight/components';
import handoffFinalOutputTypes from '../../../../../../examples/docs/results/handoffFinalOutputTypes.ts?raw';
import historyLoop from '../../../../../../examples/docs/results/historyLoop.ts?raw';
import usageExample from '../../../../../../examples/docs/results/usage.ts?raw';

[에이전트 실행](/openai-agents-js/ko/guides/running-agents)을 수행하면 다음 중 하나를 받습니다:

- `stream: true` 없이 `run`을 호출하면 [`RunResult`](/openai-agents-js/openai/agents/classes/runresult)
- `stream: true`로 `run`을 호출하면 [`StreamedRunResult`](/openai-agents-js/openai/agents/classes/streamedrunresult). 스트리밍에 대한 자세한 내용은 [스트리밍 가이드](/openai-agents-js/ko/guides/streaming)도 확인하세요.

## 사용할 속성

대부분의 애플리케이션에서는 몇 가지 결과 속성만 필요합니다:

| Property                    | Use it when you need...                                                  |
| --------------------------- | ------------------------------------------------------------------------ |
| `finalOutput`               | 사용자에게 보여줄 최종 답변                                              |
| `history`                   | 수동 채팅 루프를 위한 전체 다음 턴 입력 배열 (`input + generated items`) |
| `output`                    | 이번 실행에서 생성된 모델 출력 형태의 항목만 필요할 때                   |
| `newItems`                  | 로그, UI, 감사용 에이전트/도구 메타데이터가 포함된 풍부한 실행 항목      |
| `lastAgent` / `activeAgent` | 일반적으로 다음 턴을 처리해야 하는 에이전트                              |
| `lastResponseId`            | 다음 OpenAI Responses 턴에서 `previousResponseId`로 이어서 실행할 때     |
| `interruptions`             | 재개 전에 반드시 해결해야 하는 대기 중 도구 승인                         |
| `state`                     | 재개/재시도 흐름에 사용할 수 있는 직렬화 가능한 스냅샷                   |

## 최종 출력

`finalOutput` 속성에는 마지막으로 실행된 에이전트의 최종 출력이 들어 있습니다. 이 결과는 다음 중 하나입니다:

- `string` — `outputType`이 정의되지 않은 모든 에이전트의 기본값
- `unknown` — 에이전트의 출력 타입이 JSON 스키마로 정의된 경우. 이때 JSON은 파싱되지만 타입은 여전히 수동으로 검증해야 합니다.
- `z.infer<outputType>` — 에이전트의 출력 타입이 Zod 스키마로 정의된 경우. 출력은 이 스키마를 기준으로 자동 파싱됩니다.
- `undefined` — 에이전트가 출력을 생성하지 못한 경우(예: 출력 생성 전에 중단됨)

서로 다른 출력 타입으로 핸드오프를 사용한다면, 에이전트를 만들 때 `new Agent()` 생성자 대신 `Agent.create()` 메서드를 사용해야 합니다.

이렇게 하면 SDK가 가능한 모든 핸드오프 전반에서 출력 타입을 추론하고 `finalOutput` 속성에 대해 유니온 타입을 제공합니다.

예시:

<Code
  lang="typescript"
  code={handoffFinalOutputTypes}
  title="Handoff final output types"
/>

## 다음 턴 입력

다음 턴 입력에 접근하는 방법은 두 가지입니다:

- `result.history` — 입력과 에이전트 출력의 복사본을 모두 포함합니다
- `result.output` — 전체 에이전트 실행의 출력을 포함합니다

실제로는:

- 애플리케이션에서 전체 대화를 수동으로 유지할 때는 `result.history`를 사용하세요
- 이전 대화 기록을 이미 다른 곳에 저장하고 있고 이번 실행의 새 출력 항목만 원할 때는 `result.output`을 사용하세요
- `conversationId` 또는 `previousResponseId`를 사용 중이라면, 보통 둘 다 `run()`에 다시 전달하지 않습니다. 대신 새 사용자 입력만 전달하고 서버가 관리하는 ID를 재사용하세요.

`history`는 채팅과 유사한 사용 사례에서 전체 기록을 유지하는 편리한 방법입니다:

<Code lang="typescript" code={historyLoop} title="History loop" />

## 마지막 에이전트

`lastAgent` 속성에는 마지막으로 실행된 에이전트가 들어 있습니다. 애플리케이션에 따라 이는 사용자가 다음 입력을 보낼 때 유용한 경우가 많습니다. 예를 들어, 1차 분류 에이전트가 언어별 에이전트로 핸드오프하는 구조라면 마지막 에이전트를 저장해 두고 사용자가 다음 메시지를 보낼 때 재사용할 수 있습니다.

`activeAgent`는 같은 값을 가리키는 별칭입니다.

스트리밍 모드에서는 현재 실행 중인 에이전트를 가리키는 `currentAgent` 속성도 유용할 수 있습니다.

## 새 항목

`newItems` 속성에는 실행 중 새로 생성된 항목이 들어 있습니다. 항목은 [`RunItem`](/openai-agents-js/openai/agents/type-aliases/runitem)입니다. 실행 항목은 LLM이 생성한 원시 항목을 감싸며, LLM 출력 외에도 이 이벤트가 어떤 에이전트와 연관되어 있는지 추가로 확인할 수 있습니다.

- [`RunMessageOutputItem`](/openai-agents-js/openai/agents/classes/runmessageoutputitem): LLM의 메시지를 나타냅니다. 원시 항목은 생성된 메시지입니다.
- [`RunHandoffCallItem`](/openai-agents-js/openai/agents/classes/runhandoffcallitem): LLM이 핸드오프 도구를 호출했음을 나타냅니다. 원시 항목은 LLM의 도구 호출 항목입니다.
- [`RunHandoffOutputItem`](/openai-agents-js/openai/agents/classes/runhandoffoutputitem): 핸드오프가 발생했음을 나타냅니다. 원시 항목은 핸드오프 도구 호출에 대한 도구 응답입니다. 항목에서 소스/타깃 에이전트에도 접근할 수 있습니다.
- [`RunToolCallItem`](/openai-agents-js/openai/agents/classes/runtoolcallitem): LLM이 도구를 호출했음을 나타냅니다.
- [`RunToolCallOutputItem`](/openai-agents-js/openai/agents/classes/runtoolcalloutputitem): 도구가 호출되었음을 나타냅니다. 원시 항목은 도구 응답입니다. 항목에서 도구 출력에도 접근할 수 있습니다.
- [`RunReasoningItem`](/openai-agents-js/openai/agents/classes/runreasoningitem): LLM의 추론 항목을 나타냅니다. 원시 항목은 생성된 추론입니다.
- [`RunToolApprovalItem`](/openai-agents-js/openai/agents/classes/runtoolapprovalitem): LLM이 도구 호출 승인을 요청했음을 나타냅니다. 원시 항목은 LLM의 도구 호출 항목입니다.

## 상태

`state` 속성에는 실행 상태가 들어 있습니다. `result`에 붙는 대부분의 정보는 `state`에서 파생되지만, `state`는 직렬화/역직렬화도 가능하며 [오류 복구](/openai-agents-js/ko/guides/running-agents#exceptions)가 필요하거나 일시 중지된 [휴먼 인 더 루프 (HITL)](/openai-agents-js/ko/guides/human-in-the-loop) 흐름을 재개할 때 `run()`의 후속 호출 입력으로 사용할 수 있습니다.

## 인터럽션(중단 처리)

에이전트에서 `needsApproval`을 사용하면 실행이 일시 중지되고 `interruptions`가 노출될 수 있습니다. 이 배열에는 실행을 계속하기 전에 결정을 내려야 하는 `RunToolApprovalItem`이 들어 있습니다. `result.state.approve(...)` / `result.state.reject(...)`로 이를 해결한 다음, 같은 상태로 `run()`을 다시 호출하세요. 종단 간 패턴은 [휴먼 인 더 루프 (HITL) 가이드](/openai-agents-js/ko/guides/human-in-the-loop)를 확인하세요.

## 기타 정보

### 원시 응답

`rawResponses` 속성에는 에이전트 실행 중 모델이 생성한 원시 LLM 응답이 들어 있습니다.

### 마지막 응답 ID

`lastResponseId` 속성에는 에이전트 실행 중 모델이 생성한 마지막 응답의 ID가 들어 있습니다. OpenAI Responses API 체이닝을 사용할 때 다음 턴에서 `previousResponseId`로 다시 전달하는 값입니다.

### 가드레일 결과

`inputGuardrailResults` 및 `outputGuardrailResults` 속성에는 가드레일 결과(있는 경우)가 들어 있습니다. 가드레일 결과에는 로그로 남기거나 저장하고 싶은 유용한 정보가 포함될 수 있으므로, 이를 사용할 수 있도록 제공합니다.

도구 가드레일 결과는 `toolInputGuardrailResults` 및 `toolOutputGuardrailResults`를 통해 별도로 노출됩니다.

### 사용량

토큰 사용량은 `result.state.usage`에 집계되며, 실행의 요청 수와 토큰 총계를 추적합니다. 스트리밍 실행의 경우 이 데이터는 응답이 도착할 때마다 업데이트됩니다.

<Code lang="typescript" code={usageExample} title="Read usage from RunState" />

### 원본 입력

`input` 속성에는 실행 메서드에 제공한 원본 입력이 들어 있습니다. 대부분의 경우 필요하지 않지만, 필요할 때 사용할 수 있습니다.
